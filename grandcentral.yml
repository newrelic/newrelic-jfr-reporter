project_name: jfr-reporter
display_name: Java Agent - JFR Reporter Library
team_name: java-agent
slack_channel: java-agent-bots
require_sidekick_approval: true
disable_default_environments: true
deploy_mechanism: none
test_suites:
  - name: Unit Tests
    command: ./gradlew clean test
    environment:
      docker_image: cf-registry.nr-ops.net/newrelic/ubuntu-1804-java:14-30-ea-1
    reports:
      junit:
        pattern: '**/build/test-results/**/*.xml'
build:
  environment:
    dockerfile: |
      FROM cf-registry.nr-ops.net/newrelic/ubuntu-1804-java:14-30-ea-1
      RUN apt-get update && apt-get install -y maven
    secret_env_vars:
      - name: SONATYPE_USERNAME
      - name: SONATYPE_PASSWORD
      - name: SIGNING_KEYID
      - name: SIGNING_PASSWORD
      - name: SIGNING_SECRETKEYRINGFILE
  publish:
    command: ./release.sh
