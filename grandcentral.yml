project_name: jfr-reporter
display_name: Java Agent - JFR Reporter Library
team_name: java-agent
slack_channel: java-agent-bots
require_sidekick_approval: true
disable_default_environments: true
deploy_mechanism: none
test_suites:
  - name: Unit Tests
    command: mvn test
    environment:
      dockerfile: |
        FROM cf-registry.nr-ops.net/newrelic/ubuntu-1804-java:14-30-ea-1
        RUN apt-get update && apt-get install -y maven
    reports:
      junit:
        pattern: '**/target/surefire-reports/**/*.xml'
build:
  environment:
    dockerfile: |
      FROM cf-registry.nr-ops.net/newrelic/ubuntu-1804-java:14-30-ea-1
      RUN apt-get update && apt-get install -y maven
    secret_env_vars:
      - name: ARTIFACTORY_USERNAME
        shared_path: artifactory
      - name: ARTIFACTORY_PASSWORD
        shared_path: artifactory
  publish:
    command: mvn package deploy
