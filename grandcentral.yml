project_name: jfr-reporter
display_name: Java Agent - JFR Reporter Library
team_name: java-agent
slack_channel: java-agent-bots
require_sidekick_approval: false
disable_default_environments: true
deploy_mechanism: none
test_suites:
  - name: Unit Tests
    command: ./gradlew clean test
    environment:
      dockerfile: |
        FROM cf-registry.nr-ops.net/newrelic/ubuntu-1804-java:14_36
    reports:
      junit: {}

build:
  environment:
    dockerfile: |
      FROM cf-registry.nr-ops.net/newrelic/ubuntu-1804-java:14_36
      RUN mkdir -p ${HOME}/
    secret_env_vars:
      - name: ARTIFACTORY_USERNAME
        shared_path: artifactory
      - name: ARTIFACTORY_PASSWORD
        shared_path: artifactory
      - name: SONATYPE_USERNAME
      - name: SONATYPE_PASSWORD
      - name: SIGNING_KEY
      - name: SIGNING_KEY_ID
      - name: SIGNING_PASSWORD
  build_artifact:
    command: ./gradlew shadowJar
  publish:
    command: ./gradlew publish